{"is_source_file": true, "format": "TypeScript", "description": "This file defines the NextAuth configuration for authentication in a Next.js application, utilizing credentials provider and JWT sessions. It includes schema validation and custom callbacks for token and session handling.", "external_files": ["@/lib/api"], "external_methods": ["api.post"], "published": ["GET", "POST"], "classes": [], "methods": [{"name": "authorize", "description": "Authenticates user credentials by calling the backend /auth/login endpoint and returns user info with access token."}, {"name": "jwt", "description": "Creates or updates JWT token with user data and access token."}, {"name": "session", "description": "Attaches user info and access token to session object."}], "calls": ["api.post"], "search-terms": ["next-auth route configuration", "Credentials provider", "JWT session callback", "login schema validation", "/auth/login endpoint"], "state": 2, "file_id": 19, "knowledge_revision": 75, "git_revision": "", "revision_history": [{"40": ""}, {"64": ""}, {"70": ""}, {"75": ""}], "ctags": [{"_type": "tag", "name": "BackendLoginResponse", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^type BackendLoginResponse = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "UserWithAccessToken", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^type UserWithAccessToken = User & { accessToken: string };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "accessToken", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^              accessToken: data.accessToken,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "accessToken", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^      const t = token as unknown as { user?: { id?: string; name?: string | null; email?: string/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "authOptions", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^const authOptions: NextAuthOptions = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^          const { data } = await api.post<BackendLoginResponse>(\"\\/auth\\/login\", parsed.data);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "dynamic", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^export const dynamic = \"force-dynamic\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^              email: data.user.email,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^        const userPayload = { id: u.id, name: u.name ?? null, email: u.email ?? null, image: u.i/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^      const t = token as unknown as { user?: { id?: string; name?: string | null; email?: string/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "handler", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^const handler = NextAuth(authOptions);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "image", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^              image: data.user.image ?? undefined,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "image", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^        const userPayload = { id: u.id, name: u.name ?? null, email: u.email ?? null, image: u.i/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "image", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^      const t = token as unknown as { user?: { id?: string; name?: string | null; email?: string/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "loginSchema", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^const loginSchema = z.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^              name: data.user.name ?? undefined,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^        const userPayload = { id: u.id, name: u.name ?? null, email: u.email ?? null, image: u.i/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^      const t = token as unknown as { user?: { id?: string; name?: string | null; email?: string/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^        const userPayload = { id: u.id, name: u.name ?? null, email: u.email ?? null, image: u.i/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "t", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^      const t = token as unknown as { user?: { id?: string; name?: string | null; email?: string/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^            const u: UserWithAccessToken = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^        const u = user as UserWithAccessToken;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "undefined", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^              image: data.user.image ?? undefined,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "undefined", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^              name: data.user.name ?? undefined,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "userPayload", "path": "/home/kavia/workspace/code-generation/reviewmate-ai-53391-53620/FrontendService/src/app/api/auth/[...nextauth]/route.ts", "pattern": "/^        const userPayload = { id: u.id, name: u.name ?? null, email: u.email ?? null, image: u.i/", "language": "TypeScript", "kind": "constant"}], "hash": "64ae39ae8faae8aef3f299253686d2cf", "format-version": 4, "code-base-name": "FrontendService", "filename": "FrontendService/src/app/api/auth/[...nextauth]/route.ts"}